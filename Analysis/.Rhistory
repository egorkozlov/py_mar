##################################################
#Get the PSID Data to get info on income process
##################################################
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
#years<-linspace(1997,2017,n=11
years<-c(1999,2001,2003,2005,2007,2009,2011,2013,2015,2017)#
years_o<-c(1999,2001,2003,2005,2007,2009,2011)
years_n<-c(1999,2001,2003,2005,2007,2009,2011,2013,2015,2017)
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#cwf <- read.xlsx("http://psidonline.isr.umich.edu/help/xyr/psid.xlsx")
#Variables
date<-subset(getNamesPSID("ER60014", cwf, years=years),select=c("variable"))$variable
state<-subset(getNamesPSID("ER60003", cwf, years=years),select=c("variable"))$variable
age_w <- subset(getNamesPSID("ER60019", cwf, years=years),select=c("variable"))$variable
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
#age<- c("ER10009","ER13010","ER17013","ER21017","ER25017","ER36017","ER42017","ER47317","ER53017","ER60017","ER66017")#""ER60019getNamesPSID("ER10009 ", cwf, years=years)
wls<-subset(getNamesPSID("ER65177", cwf, years=years),select=c("variable"))$variable
mls<-subset(getNamesPSID("ER60024", cwf, years=years),select=c("variable"))$variable
ms<-subset(getNamesPSID("ER65461", cwf, years=years),select=c("variable"))$variable
hea<-subset(getNamesPSID("ER34303", cwf, years=years),select=c("variable"))$variable
wgt<-subset(getNamesPSID("ER34413", cwf, years=years),select=c("variable"))$variable
sex<-subset(getNamesPSID("ER60018", cwf, years=years),select=c("variable"))$variable
edu<-subset(getNamesPSID("ER34349", cwf, years=years),select=c("variable"))$variable
eduf<-subset(getNamesPSID("ER65460", cwf, years=years),select=c("variable"))$variable
hsw_sp<-subset(getNamesPSID("ER66727", cwf, years=years),select=c("variable"))$variable
hsw_re<-subset(getNamesPSID("ER66714", cwf, years=years),select=c("variable"))$variable
mort1<-subset(getNamesPSID("ER13047", cwf, years=years),select=c("variable"))$variable
mort2<-subset(getNamesPSID("ER60049", cwf, years=years),select=c("variable"))$variable
head_hrs<-subset(getNamesPSID("ER57976", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
partner_li<-subset(getNamesPSID("ER61349", cwf, years=years),select=c("variable"))$variable
whet_partner_li<-subset(getNamesPSID("ER61348", cwf, years=years),select=c("variable"))$variable
spouse_present<-subset(getNamesPSID("ER67399", cwf, years=years),select=c("variable"))$variable
sequence_number<-subset(getNamesPSID("ER34302", cwf, years=years),select=c("variable"))$variable
ch_fu<-subset(getNamesPSID("ER66021", cwf, years=years),select=c("variable"))$variable
ba1<-subset(getNamesPSID("S803", cwf, years=years),select=c("variable"))$variable
ba_a2<-subset(getNamesPSID("ER71429", cwf, years=years),select=c("variable"))$variable
ba_d2<-subset(getNamesPSID("ER71431", cwf, years=years),select=c("variable"))$variable
chk<-subset(getNamesPSID("ER71435", cwf, years=years),select=c("variable"))$variable
stocks<-subset(getNamesPSID("ER71445", cwf, years=years),select=c("variable"))$variable
ira<-subset(getNamesPSID("ER71455", cwf, years=years),select=c("variable"))$variable
veh<-subset(getNamesPSID("ER71447", cwf, years=years),select=c("variable"))$variable
#house<-subset(getNamesPSID("ER66031", cwf, years=years),select=c("variable"))$variable
home_eq<-subset(getNamesPSID("ER71481", cwf, years=years),select=c("variable"))$variable
impw1<-subset(getNamesPSID("S809", cwf, years=years),select=c("variable"))$variable
impw2_ass<-subset(getNamesPSID("ER71439", cwf, years=years),select=c("variable"))$variable
impw2_deb<-subset(getNamesPSID("ER71441", cwf, years=years),select=c("variable"))$variable
oa<-subset(getNamesPSID("ER71451", cwf, years=years),select=c("variable"))$variable
od1<-subset(getNamesPSID("S807", cwf, years=years),select=c("variable"))$variable
od2<-subset(getNamesPSID("ER71479", cwf, years=years),select=c("variable"))$variable
# create family vars data.frame
#famvars = data.frame(year=years,age_w=age_w,head_hrs=head_hrs,head_li=head_li,
#                     partner_li=partner_li,age=age,date=date,state=state,
#                     wls=wls,mls=mls,ms=ms,sex=sex,eduf=eduf,mort1=mort1,mort2=mort2,ch_fu=ch_fu,
#                     whet_partner_li=whet_partner_li,spouse_present=spouse_present,
#                     hsw_sp=hsw_sp,hsw_re=hsw_re,ba1=ba1,ba_a2=ba_a2,ba_d2=ba_d2,
#                    chk=chk,stocks=stocks,ira=ira,veh=veh,home_eq=home_eq,
#                     impw1=impw1,impw2_ass=impw2_ass,impw2_deb=impw2_deb,
#                     oa=oa,od1=od1,od2=od2)
famvars = data.frame(year=years,age_w=age_w,head_hrs=head_hrs,head_li=head_li,
partner_li=partner_li,age=age,date=date,state=state,
wls=wls,mls=mls,ms=ms,sex=sex,eduf=eduf,mort1=mort1,mort2=mort2,ch_fu=ch_fu,
whet_partner_li=whet_partner_li,spouse_present=spouse_present,
hsw_sp=hsw_sp,hsw_re=hsw_re)
indvars = data.frame(year=years,hea=hea,wgt=wgt,edu=edu,sequence_number=sequence_number)
wealthvars=data.frame(year=years,stocks=stocks)
# Build Datasets
path<-"D:\\blasutto\\Data\\PSID\\Raw\\R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,wealth.vars=wealthvars,datadir=path,design="all")
packageVersion("psidR")
##################################################
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
##################################################
#Get the PSID Data to get info on income process
##################################################
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
famvars = data.frame(year=years,age=age,head_li=head_li)
indvars = data.frame(year=years,sex=sex,age=age)
# Build Datasets
path<-"D:\\Fabio\\Data\\PSID\\Raw\\R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
#Save on disk
write.csv(data,file='C:\\Users\\Fabio\\Dropbox\\Applicazioni\\Overleaf\\teaching\\psid.csv')
yes
yes
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
famvars = data.frame(year=years,age=age,head_li=head_li)
indvars = data.frame(year=years,sex=sex,age=age)
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
sex<-subset(getNamesPSID("ER32000", cwf, years=years),select=c("variable"))$variable
#Family and Individual datasets
famvars = data.frame(year=years,age=age,head_li=head_li)
indvars = data.frame(year=years,sex=sex,age=age)
# Build Datasets
path<-"D:\\Fabio\\Data\\PSID\\Raw\\R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
# Build Datasets
path<-"C:\\Fabio\\Data\\PSID\\Raw\\R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
path<-"C:\\Users\\Fabio\\Data\\PSID\\Raw\\R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
path<-"C:\\Users\\Fabio\\Data\\PSID\\Raw\\R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
##################################################
#Get the PSID Data to get info on income process
##################################################
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
sex<-subset(getNamesPSID("ER32000", cwf, years=years),select=c("variable"))$variable
#Family and Individual datasets
famvars = data.frame(year=years,age=age,head_li=head_li)
indvars = data.frame(year=years,sex=sex,age=age)
# Build Datasets
path<-"C:\\Users\\Fabio\\Data\\PSID\\Raw\\R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
path<-"C:/Users/Fabio/Data/PSID/Raw/R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
sex
age
# remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
#sex<-subset(getNamesPSID("ER32000", cwf, years=years),select=c("variable"))$variable
#Family and Individual datasets
famvars = data.frame(year=years,age=age,head_li=head_li)
indvars = data.frame(year=years,age=age)
# Build Datasets
path<-"C:/Users/Fabio/Data/PSID/Raw/R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
#Save on disk
write.csv(data,file='C:\\Users\\Fabio\\Dropbox\\Applicazioni\\Overleaf\\teaching\\psid.csv')
path<-"C:/Users/Fabio"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
path<-"C:/Users/Fabio/Data/PSID/Raw/R"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
path<-"C:/Users/Fabio/Data"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
path<-"C:/Users/Fabio/Data/PSID/"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
#sex<-subset(getNamesPSID("ER32000", cwf, years=years),select=c("variable"))$variable
#Family and Individual datasets
famvars = data.frame(year=years,age=age,head_li=head_li)
indvars = data.frame(year=years,age=age)
# Build Datasets
path<-"C:/Users/Fabio/Data/PSID/Raw/R/"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
#Save on disk
write.csv(data,file='C:\\Users\\Fabio\\Dropbox\\Applicazioni\\Overleaf\\teaching\\psid.csv')
1+1
1+1
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
View(cwf)
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
#sex<-subset(getNamesPSID("ER32000", cwf, years=years),select=c("variable"))$variable
#Family and Individual datasets
famvars = data.frame(year=years,age=age,head_li=head_li)
indvars = data.frame(year=years)
# Build Datasets
path<-"C:/Users/Fabio/Data/PSID/Raw/R/"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
## remove (almost) everything in the working environment.
rm(list = ls())
library(psidR)
library(openxlsx)
require(data.table)
library(pracma)
#Years I want to consider: we ned both cohabitation and marriage
years<-linspace(1968,1992,n=25)#
#Get variable names
cwf = openxlsx::read.xlsx(system.file(package="psidR","psid-lists","psid.xlsx"))
#Variables
age<- subset(getNamesPSID("ER13010", cwf, years=years),select=c("variable"))$variable
head_li<-subset(getNamesPSID("ER65216", cwf, years=years),select=c("variable"))$variable
#sex<-subset(getNamesPSID("ER32000", cwf, years=years),select=c("variable"))$variable
#Family and Individual datasets
famvars = data.frame(year=years,age=age,head_li=head_li)
# Build Datasets
path<-"C:/Users/Fabio/Data/PSID/Raw/R/"
data<-build.panel(fam.vars=famvars,ind.vars=indvars,datadir=path,design="all")
data<-build.panel(fam.vars=famvars,datadir=path,design="all")
1+1
#Save on disk
write.csv(data,file='C:\\Users\\Fabio\\Dropbox\\Applicazioni\\Overleaf\\teaching\\psid.csv')
